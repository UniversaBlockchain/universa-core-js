import { expect } from 'chai';
import 'mocha';

import {
  encode64,
  decode64,
  TransactionPack,
  Compound,
  Contract,
  Boss
} from '../src';

const COMPOUND_BIN = decode64('H0NzdWJJdGVtcw7EEwMvI3NhbHRkOtan0eUSp4/gTypvI2RhdGHE0wIfG25ldwZDcmV2b2tpbmcdQ2NvbnRyYWN0J0thcGlfbGV2ZWwgM19fdHlwZYNVbml2ZXJzYUNvbnRyYWN0U2RlZmluaXRpb24vI2RhdGEnc3Nob3J0X2N1cnJlbmN5M01VRE9LMSNuYW1lO01vZG9rZW5bZGVzY3JpcHRpb267IkxvcmVtIGlwc3VtIG90aGVyd2lzZSBtZXJvbCBtdXNwaS5DY3VycmVuY3lzTVVET0tFTiBzdXBwbHlTcmVmZXJlbmNlcx1bcGVybWlzc2lvbnMXMzF5Z3RJZSeFU3NwbGl0X2pvaW4jcm9sZR9bdGFyZ2V0X25hbWUrb3duZXJFQ1JvbGVMaW5rhSNAc2pwU2ZpZWxkX25hbWUzYW1vdW50RZtTcGxpdEpvaW5QZXJtaXNzaW9uM2V3VUdmdB+9HB+9Hr0fRb0ghTNAY2hvd25Fq0NoYW5nZU93bmVyUGVybWlzc2lvboVjY2hhbmdlX293bmVyU2NyZWF0ZWRfYXR5QX8Zf4UzaXNzdWVyL0thZGRyZXNzZXMWF0VTS2V5QWRkcmVzc0N1YWRkcmVzc7w1IAgWlHhkckcDdZrTwE/VbHDxrN8q4tIWPktrwu1PuJoGoONrkp9BHq2TrQv8KWoO75GU5X0XRb0xvTK8NRDdzM7dW2L3TE9IXugCFv+NpA0zUIGGVqaQokS1hLz9gZc7HdZ87wRBcIYvQDRLsGMLjerBI2tleXMdRVNTaW1wbGVSb2xlhb0sO2Fub25JZHMdK3N0YXRlX70fL70uDr0wvTYdRb03hb0fvTgdM3BhcmVudAVTZXhwaXJlc19hdHlBNnpiwGUPvSNLMTAwMDAwMC4wtR1LYnJhbmNoX2lkBTNvcmlnaW4FK3JvbGVzB70reUF/GX+FU2NyZWF0ZWRfYnkvvS69PL02HUW9N4U7Y3JlYXRvcr04HUNyZXZpc2lvbggjdHlwZVN1bmljYXBzdWxlO3ZlcnNpb24YU3NpZ25hdHVyZXMGQ2NvbnRyYWN0xKADLyNzYWx0ZCP2Awiv4PMyr9FE1iNkYXRhxGADHxtuZXcOF1Njb21wb3NpdGUzvGAY2UfzaxMBjzuzeSQWVPwXN7tTFqPr4jE6AREohv+FAUs386aZOvOC7+vPSQrejDBeNE8Z0VbyvJrirzl11LCKDgTHhFbpQAhdV3rSRS/7P3FtGdgwa7fSaBsnLvHDgxQzX190eXBlM0hhc2hJZENyZXZva2luZwZDY29udHJhY3QnS2FwaV9sZXZlbCA9g1VuaXZlcnNhQ29udHJhY3RTZGVmaW5pdGlvbi8jZGF0YR8jdHlwZYt1bml2ZXJzYV9jb21wb3VuZEtjb250cmFjdHMPK3Rva2VuJ40FI3JlZnNVE2lku4BHTmxIODJzVEFZODdzM2trRmxUOEZ6ZTdVeGFqNitJeE9nRVJLSWIvaFFGTE4vT21tVHJ6Z3Uvcnowa0szb3d3WGpSUEdkRlc4cnlhNHE4NWRkU3dpZzRFeDRSVzZVQUlYVmQ2MGtVdit6OXhiUm5ZTUd1MzBtZ2JKeTd4dzRNVSN0YWdzBzt2ZXJzaW9uCFNyZWZlcmVuY2VzDk9Lc2lnbmVkX2J5VStyb2xlc1U9S1JlZmVyZW5jZSNuYW1lK2R1bW15K3doZXJlDzNhbnlfb2YOP1tsZWZ0T3BlcmFuZIt0aGlzLnN0YXRlLnBhcmVudGNyaWdodE9wZXJhbmQFe3JpZ2h0Q29udmVyc2lvbgCLdHlwZU9mTGVmdE9wZXJhbmQAc2xlZnRDb252ZXJzaW9uAJN0eXBlT2ZSaWdodE9wZXJhbmQQQ29wZXJhdG9yCJ0QM2ZpZWxkc1WDdHJhbnNhY3Rpb25hbF9pZANDcmVxdWlyZWRhW3Blcm1pc3Npb25zvR1TY3JlYXRlZF9hdHlBfxl/hTNpc3N1ZXI3S2FkZHJlc3Nlc1Uja2V5c1U9U1NpbXBsZVJvbGW9Jb06O2Fub25JZHNVvTcPM0FMTF9PRg69JitzdGF0ZV8rb3duZXIfW3RhcmdldF9uYW1lvTo9Q1JvbGVMaW5rvSW9RTNwYXJlbnQFU2V4cGlyZXNfYXR5QWljf4WNvR29H1VLYnJhbmNoX2lkBTNvcmlnaW4FvSO9Hb05eUF/GX+FU2NyZWF0ZWRfYnkfvUe9Oj29SL0lO2NyZWF0b3JDcmV2aXNpb24II3R5cGVTdW5pY2Fwc3VsZTt2ZXJzaW9uGFNzaWduYXR1cmVzBjNfX3R5cGV7VHJhbnNhY3Rpb25QYWNr');

describe('Compound', () => {
  it('should read compound', async () => {
    const compound = Compound.unpack(COMPOUND_BIN);
    const token = await compound.getTag('token') as TransactionPack;
    expect(token.contract.definition.data.short_currency).to.equal('MUDOK1');
  });
});
